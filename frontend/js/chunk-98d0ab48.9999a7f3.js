(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98d0ab48"],{"1a21":function(e,t,o){},"2fa4":function(e,t,o){},bf8a:function(e,t,o){"use strict";o("1a21")},c2bd:function(e,t,o){"use strict";o.r(t);o("14d9");var c=o("7a23"),l=o("a90d"),a=o("df9f");const n={class:"flex"},r={class:"font-bold inline-block no-wrap"},s={class:"font-bold score-text",style:{"margin-left":"16px","white-space":"nowrap"}},d={class:"inline-block opera-buttons"},m={class:"font-bold score-text",style:{"margin-left":"16px","white-space":"nowrap"}},i={class:"inline-block opera-buttons"},b={class:"font-bold score-text",style:{"margin-left":"16px","white-space":"nowrap"}},p={class:"font-bold",style:{"margin-left":"16px","white-space":"nowrap"}},u={class:"font-bold",style:{"margin-left":"16px","white-space":"nowrap"}},O={class:"card-footer"},j={class:"font-bold"},f={key:0,class:"color666"},V={key:1,class:"color666"},x={key:2,class:"color666"},k=["innerHTML"],y={class:"score-text primary-color"},N={key:0},C={class:"font-bold"},h={class:"warning-color"},g={key:1,style:{padding:"12px"}};var B=Object(c["defineComponent"])({__name:"QuestionModule",props:{form:{type:Object,default:()=>({})},currentIndex:{type:Number,default:0},sequence:{type:Number,default:0}},emits:["update:currentIndex","update:form"],setup(e,{emit:t}){const o=e,B=t,w=Object(c["reactive"])({closeCircleSharp:"close-circle-sharp",form:o.form,options:[{name:"评分",code:"starScore"},{name:"多选",code:"checkbox"},{name:"单选",code:"radio"},{name:"填空题",code:"text"}]}),v=(e,t)=>{const o=JSON.parse(JSON.stringify(e));o.key=t,w.form.options.splice(t,0,o)},E=(e,t)=>{w.form.options.length>1&&w.form.options.splice(t,1)};w.form.score=Object(c["computed"])(()=>{let e=0;return w.form.options.forEach(t=>{e+=Number(t.score||0)}),e});const _=e=>{console.log(2222,e),B("update:form",w.form),B("update:currentIndex",e+1)},L=e=>{w.form.resultOption="checkbox"===e?[]:null},q=(e,t)=>{"radio"===t?w.form.options.forEach(t=>{t.isRight=!1,t.name===e&&(t.isRight=!0)}):e.forEach(e=>{w.form.options.forEach(t=>{e.name===t.name&&(t.isRight=!0)})})};return(e,t)=>{const B=Object(c["resolveComponent"])("el-input"),I=Object(c["resolveComponent"])("el-form-item"),S=Object(c["resolveComponent"])("el-button"),T=Object(c["resolveComponent"])("el-radio"),U=Object(c["resolveComponent"])("el-radio-group"),z=Object(c["resolveComponent"])("el-checkbox"),P=Object(c["resolveComponent"])("el-checkbox-group"),D=Object(c["resolveComponent"])("el-rate"),F=Object(c["resolveComponent"])("el-form"),J=Object(c["resolveComponent"])("el-option"),R=Object(c["resolveComponent"])("el-select"),M=Object(c["resolveComponent"])("el-card");return o.sequence===o.currentIndex?(Object(c["openBlock"])(),Object(c["createBlock"])(M,{key:0},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(F,{ref:"ruleFormRef",model:w.form},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(I,{prop:"desc"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("span",r,Object(c["toDisplayString"])(o.sequence)+".",1),Object(c["createVNode"])(B,{type:"textarea",modelValue:w.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>w.form.name=e),placeholder:"输入题目",style:{"margin-left":"8px"}},null,8,["modelValue"]),Object(c["createElementVNode"])("span",s,[t[8]||(t[8]=Object(c["createTextVNode"])(" (分值： ")),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(w.form["score"]),1),t[9]||(t[9]=Object(c["createTextVNode"])(" ） "))])])]),_:1}),"radio"===w.form["type"]?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:0,prop:"resource"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(U,{modelValue:w.form["resultOption"],"onUpdate:modelValue":t[1]||(t[1]=e=>w.form["resultOption"]=e),onChange:t[2]||(t[2]=e=>q(e,"radio"))},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(w.form["options"],(e,o)=>(Object(c["openBlock"])(),Object(c["createBlock"])(T,{key:o,label:e.name},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(B,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t},null,8,["modelValue","onUpdate:modelValue"]),Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(S,{icon:Object(c["unref"])(l["a"]),size:"small",title:"复制",type:"primary",onClick:t=>v(e,o)},null,8,["icon","onClick"]),Object(c["createVNode"])(S,{icon:Object(c["unref"])(a["a"]),size:"small",title:"删除",type:"danger",onClick:t=>E(e,o)},null,8,["icon","onClick"])]),Object(c["createElementVNode"])("span",m,[t[10]||(t[10]=Object(c["createTextVNode"])(" (分值： ")),Object(c["createVNode"])(B,{modelValue:e["score"],"onUpdate:modelValue":t=>e["score"]=t,min:0,placeholder:"分值",size:"small",style:{width:"80px"},type:"number"},null,8,["modelValue","onUpdate:modelValue"]),t[11]||(t[11]=Object(c["createTextVNode"])(" ） "))])]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})):Object(c["createCommentVNode"])("",!0),"checkbox"===w.form["type"]?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:1,prop:"type"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(P,{modelValue:w.form["resultOption"],"onUpdate:modelValue":t[3]||(t[3]=e=>w.form["resultOption"]=e),onChange:t[4]||(t[4]=e=>q(e,"checkbox"))},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(w.form["options"],(e,o)=>(Object(c["openBlock"])(),Object(c["createBlock"])(z,{key:o,label:e.name,name:"type"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(B,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t},null,8,["modelValue","onUpdate:modelValue"]),Object(c["createElementVNode"])("div",i,[Object(c["createVNode"])(S,{icon:Object(c["unref"])(l["a"]),size:"small",title:"复制",type:"primary",onClick:t=>v(e,o)},null,8,["icon","onClick"]),Object(c["createVNode"])(S,{icon:Object(c["unref"])(a["a"]),size:"small",title:"删除",type:"danger",onClick:t=>E(e,o)},null,8,["icon","onClick"])]),Object(c["createElementVNode"])("span",b,[t[12]||(t[12]=Object(c["createTextVNode"])(" (分值： ")),Object(c["createVNode"])(B,{modelValue:e["score"],"onUpdate:modelValue":t=>e["score"]=t,min:0,placeholder:"分值",size:"small",style:{width:"80px"},type:"number"},null,8,["modelValue","onUpdate:modelValue"]),t[13]||(t[13]=Object(c["createTextVNode"])(" ） "))])]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})):Object(c["createCommentVNode"])("",!0),"starScore"===w.form["type"]?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:2,prop:"type"},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(w.form["options"],(e,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"flex align-center",key:o},[Object(c["createVNode"])(D,{disabled:"","disabled-void-color":"coral",style:{margin:"16px"},max:w.form["score"]<=5?5:w.form["score"],size:"large"},null,8,["max"]),Object(c["createElementVNode"])("span",p,[t[14]||(t[14]=Object(c["createTextVNode"])(" (最大分值： ")),Object(c["createVNode"])(B,{modelValue:e.score,"onUpdate:modelValue":t=>e.score=t,min:5,placeholder:"分值",size:"small",style:{width:"80px"},type:"number"},null,8,["modelValue","onUpdate:modelValue"]),t[15]||(t[15]=Object(c["createTextVNode"])(" ） "))])]))),128))]),_:1})):Object(c["createCommentVNode"])("",!0),"text"===w.form["type"]?(Object(c["openBlock"])(),Object(c["createBlock"])(I,{key:3,prop:"type"},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(w.form["options"],(e,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"flex align-center",key:o},[Object(c["createVNode"])(B,{type:"textarea",placeholder:"请输入",modelValue:e.result,"onUpdate:modelValue":t=>e.result=t,style:{margin:"16px"}},null,8,["modelValue","onUpdate:modelValue"]),Object(c["createElementVNode"])("span",u,[t[16]||(t[16]=Object(c["createTextVNode"])(" (分值： ")),Object(c["createVNode"])(B,{modelValue:e.score,"onUpdate:modelValue":t=>e.score=t,min:0,placeholder:"分值",size:"small",style:{width:"80px"},type:"number"},null,8,["modelValue","onUpdate:modelValue"]),t[17]||(t[17]=Object(c["createTextVNode"])(" ） "))])]))),128))]),_:1})):Object(c["createCommentVNode"])("",!0)]),_:1},8,["model"]),Object(c["createElementVNode"])("div",O,[Object(c["createVNode"])(R,{modelValue:w.form["type"],"onUpdate:modelValue":t[5]||(t[5]=e=>w.form["type"]=e),class:"m-2",onChange:t[6]||(t[6]=e=>L(e))},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(w.options,e=>(Object(c["openBlock"])(),Object(c["createBlock"])(J,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Object(c["renderSlot"])(e.$slots,"default")])]),_:3})):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,style:{"margin-left":"16px"},onClick:t[7]||(t[7]=e=>_(w.form["sequence"]))},[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",j,Object(c["toDisplayString"])(o.sequence)+".",1),"checkbox"===w.form["type"]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",f,"（多选题）")):Object(c["createCommentVNode"])("",!0),"radio"===w.form["type"]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",V,"（单选题）")):Object(c["createCommentVNode"])("",!0),"starScore"===w.form["type"]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",x,"（打分题）")):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",{innerHTML:w.form.name},null,8,k),Object(c["createElementVNode"])("span",y,[Object(c["createElementVNode"])("small",null,"（分值："+Object(c["toDisplayString"])(w.form["score"])+"）",1)])]),"checkbox"===w.form["type"]||"radio"===w.form["type"]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",N,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(w.form["options"],(t,o)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:o},[Object(c["createElementVNode"])("span",C,Object(c["toDisplayString"])(e.$tools.numberToLetter(o+1))+". ",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.name)+" ",1),Object(c["createElementVNode"])("span",h,[Object(c["createElementVNode"])("small",null,"（"+Object(c["toDisplayString"])(t.score||0)+"分）",1)])]))),128))])):Object(c["createCommentVNode"])("",!0),"starScore"===w.form["type"]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",g,[Object(c["createVNode"])(D,{disabled:"","disabled-void-color":"coral",max:w.form["score"],size:"large"},null,8,["max"])])):Object(c["createCommentVNode"])("",!0)]))}}}),w=(o("bf8a"),o("6b0d")),v=o.n(w);const E=v()(B,[["__scopeId","data-v-3050cafe"]]);var _=E,L=o("44a6"),q=o("afbc"),I=o("0613");const S={style:{"margin-bottom":"24px",width:"50%",transform:"translate(50%,0)"}};var T=Object(c["defineComponent"])({__name:"ExamCreate",props:{paperId:{type:String,default:""}},emits:["saveExam"],setup(e,{emit:t}){const o=e,l=t,a=Object(c["reactive"])({questionList:[],examPaper:{name:"",number:0,totalScore:0},currentIndex:0}),n=e=>{const t={name:"",sequence:a.questionList.length||0,resultOption:"radio"===e?null:[],score:0,options:[{key:1,name:"",score:"starScore"===e?5:0,isRight:!1}],type:e};a.currentIndex=a.questionList.length||0,a.questionList.push(t)},r=(e,t,o="add")=>{if("add"===o){const o=JSON.parse(JSON.stringify(e));a.questionList.splice(t+1,0,o),a.currentIndex=t+1}else a.questionList.splice(t,1);a.questionList.forEach((e,t)=>{e.sequence=t})},s=()=>{var e;a.examPaper.totalScore=0,a.examPaper.staffId=null===(e=I["a"].state.manageUserInfo)||void 0===e?void 0:e.id,a.examPaper.number=a.questionList.length,a.questionList.forEach(e=>{a.examPaper.totalScore+=Number(e.score)}),l("saveExam",{id:o.paperId||null,...a.examPaper,questionList:a.questionList})},d=e=>{L["a"].post("/examPaper/getDataById",{id:e}).then(e=>{a.examPaper=e.data})},m=e=>{L["a"].post("/exam/getQuestionList",{paperId:e}).then(e=>{a.questionList=e.list,a.currentIndex=-1})};return Object(c["onMounted"])(()=>{const e=q["a"].currentRoute.value.query.paperId||o.paperId;e&&(d(e),m(e))}),(e,t)=>{const o=Object(c["resolveComponent"])("el-button"),l=Object(c["resolveComponent"])("el-row"),d=Object(c["resolveComponent"])("el-header"),m=Object(c["resolveComponent"])("el-input"),i=Object(c["resolveComponent"])("el-main"),b=Object(c["resolveComponent"])("el-container");return Object(c["openBlock"])(),Object(c["createBlock"])(b,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(d,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{class:"mb-4"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,{type:"primary",onClick:t[0]||(t[0]=e=>n("radio"))},{default:Object(c["withCtx"])(()=>t[7]||(t[7]=[Object(c["createTextVNode"])("单选")])),_:1}),Object(c["createVNode"])(o,{type:"success",onClick:t[1]||(t[1]=e=>n("checkbox"))},{default:Object(c["withCtx"])(()=>t[8]||(t[8]=[Object(c["createTextVNode"])("多选")])),_:1}),Object(c["createVNode"])(o,{type:"success",onClick:t[2]||(t[2]=e=>n("starScore"))},{default:Object(c["withCtx"])(()=>t[9]||(t[9]=[Object(c["createTextVNode"])("打分")])),_:1}),Object(c["createVNode"])(o,{type:"success",onClick:t[3]||(t[3]=e=>n("text"))},{default:Object(c["withCtx"])(()=>t[10]||(t[10]=[Object(c["createTextVNode"])("填空")])),_:1}),Object(c["createVNode"])(o,{type:"info"},{default:Object(c["withCtx"])(()=>t[11]||(t[11]=[Object(c["createTextVNode"])("预览试卷")])),_:1}),Object(c["createVNode"])(o,{type:"warning",onClick:t[4]||(t[4]=e=>s())},{default:Object(c["withCtx"])(()=>t[12]||(t[12]=[Object(c["createTextVNode"])("保存")])),_:1})]),_:1})]),_:1}),Object(c["createVNode"])(i,null,{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",S,[Object(c["createVNode"])(m,{modelValue:a.examPaper.name,"onUpdate:modelValue":t[5]||(t[5]=e=>a.examPaper.name=e),clearable:"",placeholder:"请输入试卷名"},null,8,["modelValue"])]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.questionList,(e,l)=>(Object(c["openBlock"])(),Object(c["createBlock"])(_,{key:e,currentIndex:a.currentIndex,"onUpdate:currentIndex":t[6]||(t[6]=e=>a.currentIndex=e),form:e,sequence:l+1},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,{class:"opera-buttons",plain:"",size:"small",title:"复制",type:"primary",onClick:t=>r(e,l)},{default:Object(c["withCtx"])(()=>t[13]||(t[13]=[Object(c["createTextVNode"])(" 复制 ")])),_:2},1032,["onClick"]),Object(c["createVNode"])(o,{class:"opera-buttons",plain:"",size:"small",title:"删除",type:"danger",onClick:t=>r(e,l,"del")},{default:Object(c["withCtx"])(()=>t[14]||(t[14]=[Object(c["createTextVNode"])("删除 ")])),_:2},1032,["onClick"])]),_:2},1032,["currentIndex","form","sequence"]))),128))]),_:1})]),_:1})}}});o("e7e5");const U=v()(T,[["__scopeId","data-v-08215ea4"]]);t["default"]=U},e7e5:function(e,t,o){"use strict";o("2fa4")}}]);