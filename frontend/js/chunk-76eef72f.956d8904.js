(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76eef72f"],{a26bb:function(e,t,a){"use strict";a.r(t);a("14d9");var l=a("7a23"),o=a("d6de"),c=a("1f4d"),n=a("f220"),s=a("44a6"),r=a("e190");const u={key:0,class:"font-warning font-bold"},b={key:1,class:"font-red font-bold"},d={key:2,class:"font-red font-bold"},i={key:3,class:"font-warning font-bold"},m={key:4,class:"font-green font-bold"},p={style:{"white-space":"nowrap"}};var j=Object(l["defineComponent"])({__name:"Recommend",setup(e){const t=Object(l["ref"])([]),a=Object(l["ref"])([]),j=e=>{const t=[];return e.forEach(e=>{t.push(e.id)}),t},O=Object(l["reactive"])([{type:"remote-select",multiple:!0,label:"推荐课程",key:"list",width:"",url:"/courses/getListByPage",value:null,queryParams:{limit:20,status:1},defaultValue:a,required:!0}]),f=Object(l["ref"])(!1),v=Object(l["ref"])({where:{is_recommend:{_eq:!0}}}),h=Object(l["ref"])(!1),w=Object(l["ref"])([{valueKey:"selection",label:"",type:"selection"},{valueKey:"name",label:"课程名称"},{valueKey:"majorName",label:"所属专业"},{valueKey:"staffName",label:"发布人"},{valueKey:"credits",label:"学分"},{valueKey:"status",type:"slot",label:"状态",width:"80px"},{valueKey:"created",label:"创建日期",type:"time"}]),y=e=>{const t=s["a"].showLoading("提交中...");s["a"].post("/recommend/createUpdate",{list:e.list}).then(e=>{e.success&&(h.value=!0,f.value=!1),s["a"].closeLoading(t)})},k=e=>{const t=s["a"].showLoading("提交中...");s["a"].post("/courses/updateById",{id:e.id,isRecommend:!1}).then(e=>{s["a"].closeLoading(t),e.success&&(h.value=!0,s["a"].msg("成功取消!"))})},C=()=>{f.value=!0};return Object(l["watch"])(()=>t.value,e=>{e.length!==a.value.length&&(a.value=j(e))}),(e,a)=>{const s=Object(l["resolveComponent"])("el-button"),j=Object(l["resolveComponent"])("el-tooltip"),V=Object(l["resolveComponent"])("el-dialog");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createVNode"])(n["a"],{refresh:h.value,"onUpdate:refresh":a[0]||(a[0]=e=>h.value=e),isShowSearchInput:!1},{"left-btn":Object(l["withCtx"])(()=>[Object(l["createVNode"])(s,{class:"background-btn",plain:"",size:"small",type:"primary",onClick:C},{default:Object(l["withCtx"])(()=>a[4]||(a[4]=[Object(l["createTextVNode"])(" 修改推荐课程 ")])),_:1})]),_:1},8,["refresh"]),Object(l["createVNode"])(o["a"],{refresh:h.value,"onUpdate:refresh":a[1]||(a[1]=e=>h.value=e),columns:w.value,"query-data":v.value,httpType:"post",list:t.value,"onUpdate:list":a[2]||(a[2]=e=>t.value=e),url:"/courses/getDataListByPage",operaWidth:"280px",operaFixed:"right"},{status:Object(l["withCtx"])(e=>[-1===e.row.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",u,"未提交")):Object(l["createCommentVNode"])("",!0),0===e.row.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",b,"审核驳回")):Object(l["createCommentVNode"])("",!0),2===e.row.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",d,"禁用")):Object(l["createCommentVNode"])("",!0),11===e.row.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",i,"待审核")):Object(l["createCommentVNode"])("",!0),1===e.row.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",m,"启用")):Object(l["createCommentVNode"])("",!0)]),default:Object(l["withCtx"])(e=>[Object(l["createElementVNode"])("div",p,[Object(l["createVNode"])(j,{content:"取消推荐",placement:"bottom"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(s,{icon:Object(l["unref"])(r["a"]),circle:"",size:"small",type:"info",onClick:t=>k(e.row)},null,8,["icon","onClick"])]),_:2},1024)])]),_:1},8,["refresh","columns","query-data","list"]),Object(l["createVNode"])(V,{modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=e=>f.value=e),title:"设置首页推荐课程"},{default:Object(l["withCtx"])(()=>[f.value?(Object(l["openBlock"])(),Object(l["createBlock"])(c["a"],{key:0,isEdit:!0,list:O,onSubmit:y},null,8,["list"])):Object(l["createCommentVNode"])("",!0)]),_:1},8,["modelValue"])])}}});const O=j;t["default"]=O}}]);