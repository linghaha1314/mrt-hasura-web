(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e9b74b7"],{"0fad":function(e,t,a){e.exports=a.p+"img/head-logo.e6a11adc.png"},"16c1":function(e,t,a){"use strict";a("2897")},2897:function(e,t,a){},4125:function(e,t,a){"use strict";a.r(t);var o=a("7a23"),l=a("0fad"),n=a.n(l);const r={class:"menu-wrapper"},s={class:"main-content"};function c(e,t,a,l,c,i){const d=Object(o["resolveComponent"])("menu-list"),u=Object(o["resolveComponent"])("el-aside"),p=Object(o["resolveComponent"])("menu-header"),m=Object(o["resolveComponent"])("el-header"),b=Object(o["resolveComponent"])("el-tag"),f=Object(o["resolveComponent"])("el-row"),g=Object(o["resolveComponent"])("router-view"),h=Object(o["resolveComponent"])("el-main"),O=Object(o["resolveComponent"])("el-container");return Object(o["openBlock"])(),Object(o["createBlock"])(O,{id:"manage"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{width:e.isCollapse?"64px":"280px",style:{transition:"all 0.5s",overflow:"auto"}},{default:Object(o["withCtx"])(()=>[t[0]||(t[0]=Object(o["createElementVNode"])("div",{class:"head-img"},[Object(o["createElementVNode"])("img",{src:n.a})],-1)),Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(d,{isCollapse:e.isCollapse,menus:e.menus},null,8,["isCollapse","menus"])])]),_:1},8,["width"]),Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,{isCollapse:e.isCollapse,onChangeIsCollapse:e.changeIsCollapse},null,8,["isCollapse","onChangeIsCollapse"])]),_:1}),Object(o["createVNode"])(h,{style:{background:"#f2f2f2"}},{default:Object(o["withCtx"])(()=>[e.tags.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,style:{"border-bottom":"2px solid #f2f2f2"}},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.tags,t=>(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:t.code,"disable-transitions":!0,class:"tag",closable:"",effect:e.store.state.currentPath===t.code?"dark":"light",size:"large",onClick:a=>e.onChange(t),onClose:a=>e.close(t)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.name),1)]),_:2},1032,["effect","onClick","onClose"]))),128))]),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",s,[Object(o["createVNode"])(g)])]),_:1})]),_:1})]),_:1})}a("14d9");const i={class:"header-wrapper"},d={style:{display:"flex","align-items":"center"}},u={class:"header-end"},p={style:{cursor:"pointer"}},m={class:"flexC ardCtr colorW flexW g-box",style:{height:"500px",padding:"10px","align-items":"center"}},b=["href"],f=["href"],g=["href"];function h(e,t,a,l,n,r){const s=Object(o["resolveComponent"])("Icon"),c=Object(o["resolveComponent"])("el-dropdown-item"),h=Object(o["resolveComponent"])("el-dropdown-menu"),O=Object(o["resolveComponent"])("el-dropdown"),j=Object(o["resolveComponent"])("el-radio"),w=Object(o["resolveComponent"])("el-radio-group"),y=Object(o["resolveComponent"])("el-dialog"),C=Object(o["resolveComponent"])("form-list"),k=Object(o["resolveComponent"])("el-drawer"),v=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",d,[Object(o["createVNode"])(s,{class:"icon",icon:"Expand",style:{"padding-left":"16px"},onClick:e.changeIsCollapse},null,8,["onClick"])]),Object(o["createElementVNode"])("div",u,[Object(o["createVNode"])(O,null,{dropdown:Object(o["withCtx"])(()=>[Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.options,t=>(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:t.id,onClick:a=>e.goUrl(t)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:Object(o["withCtx"])(()=>{var a;return[Object(o["createElementVNode"])("span",p,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.store.state.manageUserInfo.name),1),Object(o["createElementVNode"])("span",null,"("+Object(o["toDisplayString"])(null===(a=e.store.state.manageUserInfo.currentRole)||void 0===a?void 0:a.roleData.name)+")",1)]),t[6]||(t[6]=Object(o["createElementVNode"])("i",{class:"el-icon-arrow-down el-icon--right"},null,-1))]}),_:1})])]),Object(o["createVNode"])(y,{modelValue:e.store.state.isSelectRoleDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.store.state.isSelectRoleDialog=t),"destroy-on-close":"",title:"切换角色",width:"40%"},{default:Object(o["withCtx"])(()=>[e.store.state.isSelectRoleDialog?(Object(o["openBlock"])(),Object(o["createBlock"])(w,{key:0,modelValue:e.currentRoleId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.currentRoleId=t),onChange:t[1]||(t[1]=t=>e.changeCurrentRole(e.currentRoleId))},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.store.state.manageUserInfo.roles,e=>(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:e.roleId,label:e.roleId},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e["roleData"].name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])):Object(o["createCommentVNode"])("",!0)]),_:1},8,["modelValue"]),Object(o["createVNode"])(k,{modelValue:e.pageParams.isDrawer,"onUpdate:modelValue":t[3]||(t[3]=t=>e.pageParams.isDrawer=t),"append-to-body":!1,"destroy-on-close":!0,direction:"rtl",size:"40%",title:"详细信息"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C,{isEdit:e.pageParams.isEdit,list:e.formList,onSubmit:e.submit},null,8,["isEdit","list","onSubmit"])]),_:1},8,["modelValue"]),Object(o["createVNode"])(k,{modelValue:e.pageParams.isPsw,"onUpdate:modelValue":t[4]||(t[4]=t=>e.pageParams.isPsw=t),"append-to-body":!1,"destroy-on-close":!0,direction:"rtl",size:"40%",title:"修改密码"},{default:Object(o["withCtx"])(()=>[t[7]||(t[7]=Object(o["createElementVNode"])("div",{style:{"text-align":"center",color:"orangered"}}," 请填写8位以上包含大小写字母 数字 特殊符号任意三种规则的密码 ",-1)),Object(o["createVNode"])(C,{isEdit:e.pageParams.isEdit,list:e.pswList,onSubmit:e.submit},null,8,["isEdit","list","onSubmit"])]),_:1},8,["modelValue"]),Object(o["createVNode"])(k,{modelValue:e.pageParams.changeSteam,"onUpdate:modelValue":t[5]||(t[5]=t=>e.pageParams.changeSteam=t),"append-to-body":!1,"destroy-on-close":!0,direction:"rtl",size:"40%",title:"系统切换"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("a",{style:{width:"45%",color:"#ffffff"},href:e.urlArr.study[e.currentNet],target:"_blank"},[Object(o["createVNode"])(v,{class:"btn-shd",style:{width:"100%","min-height":"102px","border-radius":"16px","font-size":"20px",margin:"0",color:"#ffffff"},color:"#852c4f",size:"large"},{default:Object(o["withCtx"])(()=>t[8]||(t[8]=[Object(o["createTextVNode"])("在线学习 ")])),_:1})],8,b),Object(o["createElementVNode"])("a",{style:{width:"45%",color:"#ffffff"},href:e.urlArr.exam[e.currentNet],target:"_blank"},[Object(o["createVNode"])(v,{class:"btn-shd",style:{width:"100%","min-height":"102px","border-radius":"16px","font-size":"20px",margin:"0",color:"#ffffff"},color:"#d4b981",size:"large",onClick:e.goLogin},{default:Object(o["withCtx"])(()=>t[9]||(t[9]=[Object(o["createTextVNode"])("在线考试管理系统 ")])),_:1},8,["onClick"])],8,f),Object(o["createVNode"])(v,{class:"btn-shd",style:{width:"100%","min-height":"102px","border-radius":"16px","font-size":"20px",margin:"0"},type:"primary",size:"large",onClick:e.linksInto},{default:Object(o["withCtx"])(()=>t[10]||(t[10]=[Object(o["createTextVNode"])("科研管理系统 ")])),_:1},8,["onClick"]),Object(o["createElementVNode"])("a",{style:{width:"45%",color:"#ffffff !important"},href:e.urlArr.zhuPei[e.currentNet],target:"_blank"},[Object(o["createVNode"])(v,{class:"btn-shd",style:{width:"100%",color:"#ffffff","min-height":"102px","border-radius":"16px","font-size":"20px",margin:"0","text-wrap":"normal"},color:"#00cc00",size:"large"},{default:Object(o["withCtx"])(()=>t[11]||(t[11]=[Object(o["createTextVNode"])("住院医师规范化 "),Object(o["createElementVNode"])("br",null,null,-1),Object(o["createTextVNode"])(" 培训管理系统 ")])),_:1})],8,g)])]),_:1},8,["modelValue"])],64)}var O=a("afbc"),j=a("0613"),w=a("852e"),y=a.n(w),C=a("1f4d"),k=a("44a6"),v=a("3452"),V=a.n(v),x=Object(o["defineComponent"])({name:"",props:{isCollapse:{type:Boolean,default:!0}},emits:["changeIsCollapse"],components:{FormList:C["a"]},setup:(e,{emit:t})=>{var a;const l={study:{out:"http://117.159.24.46:3001/#/client/home",into:"http://172.16.10.53:3001/#/client/home"},zhuPei:{out:"http://117.159.24.46:64001/",into:"http://172.16.10.53:64001"},exam:{out:"http://117.159.24.46:8201",into:"http://172.16.10.53:8201"}},n=[{id:0,value:"个人中心",path:"/client/personal"},{id:1,value:"切换角色",path:""},{id:2,value:"修改密码",path:"/"},{id:3,value:"系统切换",path:"/"},{id:4,value:"退出登录",path:"login"}],r=j["a"].state.manageUserInfo||{},s=Object(o["reactive"])({currentRoleId:j["a"].state.manageUserInfo&&(null===(a=j["a"].state.manageUserInfo.currentRole)||void 0===a?void 0:a.roleId)||"",pageParams:{isEdit:!1,isDrawer:!1,refresh:!1,isPsw:!1,changeSteam:!1},currentNet:"into",formList:[{type:"none",key:"id",width:"",value:null,required:!0,defaultValue:null},{type:"input",label:"工号",key:"jobNum",width:"",value:null,required:!0,defaultValue:"",disabled:!0},{type:"input",label:"姓名",key:"name",width:"",value:null,defaultValue:"",required:!0,disabled:!0},{type:"input",label:"昵称",key:"nickName",width:"",value:null,defaultValue:""},{type:"select",multiple:!0,label:"角色",key:"roles",width:"",url:"/roles/getListByPage",value:null,defaultValue:"",required:!0,disabled:!0},{type:"input",label:"机构",key:"organizationName",width:"",value:null,defaultValue:""},{type:"select",label:"专业",key:"majorId",url:"/major/getListByPage",width:"",value:null,defaultValue:null},{type:"select",url:"/section/getListByPage",label:"科室",key:"sectionId",width:"",value:null,defaultValue:null},{type:"input",label:"岗位",key:"post",width:"",value:null,defaultValue:""},{type:"input",label:"职务",key:"duties",width:"",value:null,defaultValue:""},{type:"input",label:"院区",key:"hospital",width:"",value:null,defaultValue:""},{type:"input",label:"职位",key:"position",width:"",value:null,defaultValue:""},{type:"input",label:"职称",key:"positionTitle",width:"",value:null,defaultValue:""},{type:"input",label:"手机号码",key:"mobile",width:"",value:"",defaultValue:null},{type:"input",label:"邮箱",key:"email",width:"",value:null,defaultValue:""}],pswList:[{type:"none",key:"id",width:"",value:null,required:!0,defaultValue:null},{type:"input",label:"旧密码",key:"password",width:"",value:null,required:!0,defaultValue:""},{type:"input",label:"新密码",key:"passwordN",width:"",value:null,required:!0,defaultValue:""},{type:"input",label:"新密码",key:"passwordNR",width:"",value:null,required:!0,defaultValue:""}],userInfo:{id:"",password:"",roles:[]}});s.userInfo=j["a"].state.manageUserInfo;const c=()=>{sessionStorage.removeItem("manageUserInfo"),O["a"].push({path:"/manage/login"})},i=async e=>{var t;const a=k["a"].showLoading("切换中...");await k["a"].post("/userRole/updateCurrentRole",{staffId:null===(t=j["a"].state.manageUserInfo)||void 0===t?void 0:t.id,currentRoleId:e}),await j["a"].dispatch("getManageUserInfo",{id:j["a"].state.manageUserInfo.id}),k["a"].msg("切换成功！"),k["a"].closeLoading(a),j["a"].commit("setIsSelectRoleDialog",!1),j["a"].commit("setManageMenuId",null),await O["a"].push({path:"/manage/welcome"})},d=()=>{t("changeIsCollapse",!0)},u=document.querySelector("html");u.setAttribute("class",localStorage.getItem("v3-element-plus-style")||"base");const p=e=>{localStorage.setItem("v3-element-plus-style",e.value),u.setAttribute("class",e.value)},m=e=>{switch(e.value){case"切换角色":j["a"].commit("setIsSelectRoleDialog",!0);break;case"个人中心":s.formList.forEach(e=>{if("roles"===e.key){const t=[];s.userInfo.roles.forEach(e=>{t.push(e.roleId)}),e.value=t}else e.value=s.userInfo[e.key]}),s.pageParams.isEdit=!0,s.pageParams.isDrawer=!0;break;case"修改密码":b();break;case"系统切换":s.pageParams.changeSteam=!0;break;case"退出登录":y.a.remove("manage-token"),k["a"].get("/blockToken").then(),sessionStorage.removeItem("manageUserInfo"),O["a"].push({path:"/manage/login"});break}},b=()=>{s.pageParams.isPsw=!0,s.pageParams.isEdit=!0,s.pswList.forEach(e=>{if("roles"===e.key){const t=[];s.userInfo.roles.forEach(e=>{t.push(e.roleId)}),e.value=t}else"password"===e.key?e.value=null:e.value=s.userInfo[e.key]})},f=e=>{const t=JSON.parse(JSON.stringify(e));if(s.pageParams.isEdit){if(s.pageParams.isPsw){if(t.passwordN!==t.passwordNR)return void k["a"].msgError("两次新密码不一致!");if(!g(t.passwordN))return void k["a"].msgError("新密码不符合规则!");{const e=[];s.userInfo.roles.forEach(t=>{e.push(t.roleId)}),t.password=t.passwordN,t.roles=e,delete t.passwordN,delete t.passwordNR}}return t.password=V.a.AES.encrypt(t.password,"kb12315").toString(),void k["a"].post("/user/updateUserById",t).then(e=>{e.success&&(s.pageParams.isPsw=!1,s.pageParams.isDrawer=!1,s.pageParams.refresh=!0,k["a"].msg(e.msg),k["a"].get("getUserInfo",{id:s.userInfo.id}).then(e=>{e.data.currentRole=e.data.roles[0],j["a"].commit("setManageUserInfo",e.data),s.userInfo=e.data}))})}delete t.id,k["a"].post("/user/createUser",t).then(e=>{e.success&&(k["a"].msg(e.msg),s.pageParams.isDrawer=!1,s.pageParams.refresh=!0)})},g=e=>{let t=0;const a=e;return!(a.length<7)&&(/\d/.test(a)&&t++,/[a-z]/.test(a)&&t++,/[A-Z]/.test(a)&&t++,/\W/.test(a)&&t++,t>2)},h=()=>{if("into"===s.currentNet){const e="http://172.16.10.53:8083/login?service=http%3A%2F%2F172.16.10.79%2FuserAction%21do_casLogin.action";window.open(e,"_blank")}else k["a"].msgError("请使用医院内网才能访问科研管理系统!")};return Object(o["watch"])(()=>j["a"].state.manageUserInfo,e=>{s.userInfo=e}),Object(o["onMounted"])(()=>{s.currentNet="117.159.24.46"===window.location.hostname?"out":"into",0===j["a"].state.manageUserInfo.roles.length&&(k["a"].msgError("未检测到角色信息，请超级管理员分配角色！",4e3),O["a"].replace({path:"/manage/login"}).then(),k["a"].removeLoading())}),{changeIsCollapse:d,logOut:c,...Object(o["toRefs"])(s),changeCurrentRole:i,store:j["a"],options:n,userInfo:r,goUrl:m,linksInto:h,submit:f,urlArr:l,tabStyle:p}}}),N=(a("d6c6"),a("6b0d")),I=a.n(N);const E=I()(x,[["render",h],["__scopeId","data-v-f6403f5e"]]);var B=E,P=Object(o["defineComponent"])({__name:"MenuList",props:{menus:{type:Array,default:()=>[]},isCollapse:{type:Boolean,default:!0},key:{type:Number,default:0},mode:{type:String,default:"vertical"}},setup(e){const t=(e,t)=>{},a=(e,t)=>{},l=(e,t)=>{t.id!==j["a"].state.currentMenuId&&(j["a"].commit("setManageCurrentPath",t.code),j["a"].commit("setManageMenuId",t.id),j["a"].commit("setManageHistory",t),O["a"].push({path:"/manage/"+t.path,query:{code:t.code}}))};return Object(o["onMounted"])(()=>{j["a"].state.currentPath!==O["a"].currentRoute.value.name&&j["a"].commit("setManageCurrentPath",O["a"].currentRoute.value.name)}),(n,r)=>{const s=Object(o["resolveComponent"])("Icon"),c=Object(o["resolveComponent"])("el-menu-item"),i=Object(o["resolveComponent"])("menu-list",!0),d=Object(o["resolveComponent"])("el-sub-menu"),u=Object(o["resolveComponent"])("el-menu");return Object(o["openBlock"])(),Object(o["createBlock"])(u,{collapse:e.isCollapse,"default-active":Object(o["unref"])(j["a"]).state.currentMenuId,"default-openeds":Object(o["unref"])(j["a"]).state.openMenuArr,mode:e.mode,"unique-opened":!0,"active-text-color":"var(--menuActiveTextColor)","background-color":"var(--menuBg)","text-color":"var(--menuTextColor)",onClose:a,onOpen:t},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.menus,(t,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:t.id},[t.children&&0!==t.children.length?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,"popper-offset":40,index:t.id},{title:Object(o["withCtx"])(()=>[t.icon?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,icon:t.icon,class:"icon",style:{"padding-right":"2px"}},null,8,["icon"])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(t.name),1)]),default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:a,"is-collapse":!1,menus:t.children},null,8,["menus"]))]),_:2},1032,["index"])):(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,style:{"padding-left":"40px !important"},index:t.id,onClick:a=>l(e.key,t)},{title:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.name),1)]),default:Object(o["withCtx"])(()=>[t.icon?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,icon:t.icon,class:"icon",style:{"padding-right":"2px"}},null,8,["icon"])):Object(o["createCommentVNode"])("",!0)]),_:2},1032,["index","onClick"]))],64))),128))]),_:1},8,["collapse","default-active","default-openeds","mode"])}}});const _=P;var S=_,M=Object(o["defineComponent"])({name:"",components:{MenuHeader:B,MenuList:S},setup:()=>{const e=Object(o["reactive"])({isCollapse:!1}),t=Object(o["computed"])(()=>j["a"].state.manageHistoryList),a=()=>{e.isCollapse=!e.isCollapse},l=e=>{j["a"].commit("deleteManageHistory",e)},n=e=>{O["a"].push({path:"/manage/"+e.path,query:{code:e.code}}),j["a"].commit("setManageMenuId",e.id),j["a"].commit("setManageCurrentPath",e.code)},r=Object(o["computed"])(()=>j["a"].state.manageMenuList);return Object(o["watch"])(()=>j["a"].state.manageUserInfo.currentRole,e=>{e&&j["a"].dispatch("getMenus").then()}),Object(o["onMounted"])(()=>{var e;null!==(e=j["a"].state.manageUserInfo)&&void 0!==e&&e.currentRole&&j["a"].dispatch("getMenus").then();const t=j["a"].state.manageMenuList;0===t.length&&j["a"].dispatch("getMenus").then()}),{tags:t,menus:r,store:j["a"],...Object(o["toRefs"])(e),close:l,onChange:n,changeIsCollapse:a}}});a("16c1");const U=I()(M,[["render",c]]);t["default"]=U},9615:function(e,t,a){},d6c6:function(e,t,a){"use strict";a("9615")}}]);